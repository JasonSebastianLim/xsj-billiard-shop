---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Featured from '../components/Featured.astro';
import Promotions from '../components/Promotions.astro';
import WhyChooseUs from '../components/WhyChooseUs.astro';
import Testimonials from '../components/Testimonials.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const cues = await getCollection('cues');
// Prefer items explicitly marked as featured, otherwise take the first 3
const featuredCues = cues.filter(c => c.data.featured).slice(0, 3).length
  ? cues.filter(c => c.data.featured).slice(0, 3)
  : cues.slice(0, 3);
---

<Layout title="XSJ Cues">
  
  <Hero slot="hero" />

  <Featured cues={featuredCues} />
  <Promotions />
  <WhyChooseUs />
  <Testimonials />

</Layout>
